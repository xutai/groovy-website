<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--><head>
    <meta charset='utf-8'/><meta http-equiv='X-UA-Compatible' content='IE=edge'/><meta name='viewport' content='width=device-width, initial-scale=1'/><title>The Apache Groovy programming language - Groovy 4.0 release notes</title><link href='../img/favicon.ico' type='image/x-ico' rel='icon'/><link rel='stylesheet' type='text/css' href='../css/bootstrap.css'/><link rel='stylesheet' type='text/css' href='../css/font-awesome.min.css'/><link rel='stylesheet' type='text/css' href='../css/style.css'/><link rel='stylesheet' type='text/css' href='https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css'/>
</head><body>
    <div id='fork-me'>
        <a href='https://github.com/apache/groovy'>
            <img style='position: fixed; top: 20px; right: -58px; border: 0; z-index: 100; transform: rotate(45deg);' src='/img/horizontal-github-ribbon.png'/>
        </a>
    </div><div id='st-container' class='st-container st-effect-9'>
        <nav class='st-menu st-effect-9' id='menu-12'>
            <h2 class='icon icon-lab'>Socialize</h2><ul>
                <li>
                    <a href='../mailing-lists.html' class='icon'><span class='fa fa-envelope'></span> Discuss on the mailing-list</a>
                </li><li>
                    <a href='../groovy-weekly.html' class='icon'><span class='fa fa-envelope-o'></span> Groovy newsletter</a>
                </li><li>
                    <a href='https://twitter.com/ApacheGroovy' class='icon'><span class='fa fa-twitter'></span> Groovy on Twitter</a>
                </li><li>
                    <a href='../events.html' class='icon'><span class='fa fa-calendar'></span> Events and conferences</a>
                </li><li>
                    <a href='https://github.com/apache/groovy' class='icon'><span class='fa fa-github'></span> Source code on GitHub</a>
                </li><li>
                    <a href='../reporting-issues.html' class='icon'><span class='fa fa-bug'></span> Report issues in Jira</a>
                </li><li>
                    <a href='http://stackoverflow.com/questions/tagged/groovy' class='icon'><span class='fa fa-stack-overflow'></span> Stack Overflow questions</a>
                </li><li>
                    <a href='http://groovycommunity.com/' class='icon'><span class='fa fa-slack'></span> Slack Community</a>
                </li>
            </ul>
        </nav><div class='st-pusher'>
            <div class='st-content'>
                <div class='st-content-inner'>
                    <!--[if lt IE 7]>
                    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
                <![endif]--><div><div class='navbar navbar-default navbar-static-top' role='navigation'>
                            <div class='container'>
                                <div class='navbar-header'>
                                    <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-collapse'>
                                        <span class='sr-only'></span><span class='icon-bar'></span><span class='icon-bar'></span><span class='icon-bar'></span>
                                    </button><a class='navbar-brand' href='../index.html'>
                                        <i class='fa fa-star'></i> Apache Groovy
                                    </a>
                                </div><div class='navbar-collapse collapse'>
                                    <ul class='nav navbar-nav navbar-right'>
                                        <li class=''><a href='../learn.html'>Learn</a></li><li class=''><a href='../documentation.html'>Documentation</a></li><li class=''><a href='https://groovy.apache.org/download.html'>Download</a></li><li class=''><a href='../support.html'>Support</a></li><li class=''><a href='https://groovy.apache.org/'>Contribute</a></li><li class=''><a href='../ecosystem.html'>Ecosystem</a></li><li>
                                            <a data-effect='st-effect-9' class='st-trigger' href='#'>Socialize</a>
                                        </li><li class=''>
                                            <a href='../search.html'>
                                                <i class='fa fa-search'></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div><div id='content' class='page-1'><div class='row'><div class='row-fluid'><div class='col-lg-3'><ul class='nav-sidebar'><li class='active'><a href='#releasenotes'>Release notes for Groovy 4.0</a></li><li><a href='#Groovy4.0-naming-changes' class='anchor-link'>Important naming/structuring changes</a></li><li><a href='#Groovy4.0-consolidation' class='anchor-link'>Legacy consolidation</a></li><li><a href='#Groovy4.0-new' class='anchor-link'>New features</a></li><li><a href='#Groovy4.0-other' class='anchor-link'>Other improvements</a></li><li><a href='#Groovy4.0-ongoing' class='anchor-link'>On-going work</a></li><li><a href='#Groovy4.0-breaking' class='anchor-link'>Other breaking changes</a></li><li><a href='#Groovy4.0-requirements' class='anchor-link'>JDK requirements</a></li><li><a href='#Groovy4.0-more-info' class='anchor-link'>More information</a></li></ul></div><div class='col-lg-8 col-lg-pull-0'><a name='releasenotes'></a><h1>Release notes for Groovy 4.0</h1><div class="paragraph">
<p>Groovy 4 builds upon existing features and streamlines various legacy options.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>WARNING:</em>
Material on this page is still under development!<br>
We are currently releasing beta versions of Groovy 4.0 with a goal
of gathering feedback on the language changes from our community.
In addition, early versions assist other projects and tool vendors within the
Groovy ecosystem to begin assessing the impact of moving to/supporting Groovy 4.0.
Caution should be exercised if using new features as the details may change before final release.<br>
Some features described here as "incubating" may become stable before 4.0.0 final is released,
others are expected to remain incubating for version 4.
We don&#8217;t recommend using beta versions or incubating features for production systems.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect1">
<h2 id="Groovy4.0-naming-changes">Important naming/structuring changes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Groovy4.0-maven-coordinates">Maven coordinate change</h3>
<div class="paragraph">
<p>In Groovy 4.0, the <em>groupId</em> of the maven coordinates for Groovy have changed from <code>org.codehaus.groovy</code>
to <code>org.apache.groovy</code>. Please update your Gradle/Maven/other build settings appropriately.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-split-package-renaming">Legacy package removal</h3>
<div class="paragraph">
<p>The Java Platform Module System (JPMS) requires that classes in distinct modules
have distinct package names (known as the "split packaging requirement").
Groovy has its own "modules" that weren&#8217;t
historically structured according to this requirement.</p>
</div>
<div class="paragraph">
<p>Groovy 3 provided duplicate versions of numerous classes (in old and new packages)
to allow Groovy users to migrate towards the new JPMS compliant package names.
See the <a href="http://groovy-lang.org/releasenotes/groovy-3.0.html#Groovy3.0releasenotes-Splitpackages">Groovy 3 release notes</a>
for more details. Groovy 4 no longer provides the duplicate legacy classes.</p>
</div>
<div class="paragraph">
<p>In short, time to stop using <code>groovy.util.XmlSlurper</code> and start using <code>groovy.xml.XmlSlurper</code>.
Similarly, you should now be using <code>groovy.xml.XmlParser</code>, <code>groovy.ant.AntBuilder</code>, <code>groovy.test.GroovyTestCase</code>
and the other classes mentioned in the prior mentioned Groovy 3 release notes.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-module-changes">Module changes for groovy-all</h3>
<div class="paragraph">
<p>Based on user feedback and download statistics, we rejigged which modules are included in the <code>groovy-all</code> pom
(<a href="https://issues.apache.org/jira/browse/GROOVY-9647">GROOVY-9647</a>).
The <code>groovy-yaml</code> module is fairly widely used and is now included in <code>groovy-all</code>.
The <code>groovy-testng</code> module is less widely used and is no longer included in <code>groovy-all</code>.
Please adjust your build script dependencies if needed.
If you are using the Groovy distribution, no changes are required since it
includes the optional modules.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-consolidation">Legacy consolidation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Groovy4.0-parrot-only">Old parser removal</h3>
<div class="paragraph">
<p>Groovy 3 introduced the new "Parrot" parser which supports lambdas, method
references, and numerous other tweaks. In Groovy 3, You could still revert back to the old parser
if you wanted. In Groovy 4, the old Antlr2 based parser is removed.
Please use older versions of Groovy if you require the old parser.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-indy-only">Classic bytecode generation removal</h3>
<div class="paragraph">
<p>For many versions, Groovy could generate classic <em>call-site based</em> bytecode
or bytecode targeting the JDK7+ invoke dynamic ("indy") bytecode instructions.
You could switch between them with a compiler switch and we had two sets of
jars ("normal" and "-indy") built with and without the switch enabled.
In Groovy 4.0, only bytecode using the latter approach can be generated.
There is now one set of jars and they happen to be indy flavored.</p>
</div>
<div class="paragraph">
<p>Currently, the Groovy runtime still contains any necessary support for
classes compiled using older versions of Groovy.
Please use Groovy versions up to 3.x if you need to generate the older
style bytecode.</p>
</div>
<div class="paragraph">
<p>This work was originally planned for Groovy 3.0, but there were numerous places
where "indy" code was noticeably slower than "classic" bytecode.
We have made numerous speed improvements (starting with <a href="https://issues.apache.org/jira/browse/GROOVY-8298">GROOVY-8298</a>)
and have some ability to tune internal thresholds (search the code base for
<code>groovy.indy.optimize.threshold</code> and <code>groovy.indy.fallback.threshold</code>).
That work gave us useful speed improvements, but we welcome further feedback
to help improve overall performance of the indy bytecode.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-new">New features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Groovy4.0-new-checkers">Built-in type checkers</h3>
<div class="paragraph">
<p>Groovy&#8217;s static nature includes an extensible type-checking mechanism.
This mechanism allows users to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>selectively weaken type checking to allow more dynamic style code to parse static checking, or</p>
</li>
<li>
<p>strengthen type checking, allowing Groovy to be much stricter than Java in scenarios where that is desirable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So far, we know this feature has been used internally by companies (e.g. type-checked DSLs),
but we haven&#8217;t seen widespread sharing of type checker extensions.
From Groovy 4, we plan to bundle some select type checkers within the optional
<code>groovy-typecheckers</code> module,
to encourage further use of this feature.</p>
</div>
<div class="paragraph">
<p>The first inclusion is a checker for regular expressions. Consider the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def newYearsEve = '2020-12-31'
def matcher = newYearsEve =~ /(\d{4})-(\d{1,2})-(\d{1,2}/</code></pre>
</div>
</div>
<div class="paragraph">
<p>This passes compilation but fails at runtime with a <code>PatternSyntaxException</code>
since we "accidentally" left off the final closing bracket.
We can get this feedback at compilation time using the new checker as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">import groovy.transform.TypeChecked

@TypeChecked(extensions = 'groovy.typecheckers.RegexChecker')
def whenIs2020Over() {
    def newYearsEve = '2020-12-31'
    def matcher = newYearsEve =~ /(\d{4})-(\d{1,2})-(\d{1,2}/
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which gives this expected compilation error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1 compilation error:
[Static type checking] - Bad regex: Unclosed group near index 26
(\d{4})-(\d{1,2})-(\d{1,2}
 at line: 6, column: 19</pre>
</div>
</div>
<div class="paragraph">
<p>As usual, Groovy&#8217;s compiler customization mechanisms would allow you to
simplify application of such checkers, e.g. make it apply globally
using a compiler configuration script, as just one example.</p>
</div>
<div class="paragraph">
<p>We welcome further feedback on additional type checker extensions to include within Groovy.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-new-macro-builtins">Built-in macro methods</h3>
<div class="paragraph">
<p>Groovy macros were introduced in Groovy 2.5 to make it easier to create AST transforms
and other code which manipulates the compiler AST data structures.
One part of macros, known as macro methods, allows what looks like a global method call
to be replaced with transformed code during compilation.</p>
</div>
<div class="paragraph">
<p>A bit like type checker extensions, we know this feature has been used in numerous places,
but so far, we haven&#8217;t seen widespread sharing of macro methods.
From Groovy 4, we plan to bundle some select macro methods within the optional
<code>groovy-macro-library</code> module,
to encourage further use of this feature.</p>
</div>
<div class="paragraph">
<p>The first inclusions assist with old-school debugging (poor man&#8217;s serialization?).
Suppose during coding you have defined numerous variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def num = 42
def list = [1 ,2, 3]
def range = 0..5
def string = 'foo'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose now you want to print those out for debugging purposes.
You could write some appropriate <code>println</code> statements and maybe sprinkle in some
calls to <code>format()</code>. You might even have an IDE help you do that.
Alternatively, the <code>NV</code> macro method comes to the rescue:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">println NV(num, list, range, string)</code></pre>
</div>
</div>
<div class="paragraph">
<p>which outputs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>num=42, list=[1, 2, 3], range=[0, 1, 2, 3, 4, 5], string=foo</pre>
</div>
</div>
<div class="paragraph">
<p>Here, the <code>NV</code> macro method springs into action during the compilation process.
The compiler replaces the apparent global <code>NV</code> method call with an expression
which combines the names and <code>toString()</code> values of the supplied variables.</p>
</div>
<div class="paragraph">
<p>Two other variations exist. <code>NVI</code> calls Groovy&#8217;s <code>inspect()</code> method rather than
<code>toString()</code> and <code>NVD</code> calls Groovy&#8217;s <code>dump()</code> method. So this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">println NVI(range)</code></pre>
</div>
</div>
<div class="paragraph">
<p>produces the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>range=0..5</pre>
</div>
</div>
<div class="paragraph">
<p>And this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">println NVD(range)</code></pre>
</div>
</div>
<div class="paragraph">
<p>yields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>range=&lt;groovy.lang.IntRange@14 from=0 to=5 reverse=false inclusive=true modCount=0&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>We welcome further feedback on additional macro methods to include within Groovy.
If you do enable this optional module but want to limit which macro methods are enabled,
there is now a mechanism to disable individual macro methods (and extension methods)
<a href="https://issues.apache.org/jira/browse/GROOVY-9675">GROOVY-9675</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-new-javashell">JavaShell (incubating)</h3>
<div class="paragraph">
<p>A Java equivalent of GroovyShell, allowing to more easily work with snippets of Java code.
As an example, the following snippet shows compiling a <em>record</em> (JDK14) and checking its <code>toString</code> with Groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">import org.apache.groovy.util.JavaShell
def opts = ['--enable-preview', '--release', '14']
def src = 'record Coord(int x, int y) {}'
Class coordClass = new JavaShell().compile('Coord', opts, src)
assert coordClass.newInstance(5, 10).toString() == 'Coord[x=5, y=10]'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This feature is used in numerous places within the Groovy codebase for testing purposes.
Various code snippets are compiled using both Java and Groovy to ensure the compiler is behaving as intended.
We also use this feature to provide a productivity enhancement for polyglot developers allowing
Java code to be compiled and/or run (as Java) from within the Groovy Console:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/groovyconsole_run_as_java.png" alt="image"></span><br></p>
</div>
</div>
<div class="sect2">
<h3 id="Groovy4.0-new-pojo">POJO Annotation (incubating)</h3>
<div class="paragraph">
<p>Groovy supports both dynamic and static natures.
Dynamic Groovy&#8217;s power and flexibility comes from making (potentially extensive) use of the runtime.
Static Groovy relies on the runtime library much less. Many method calls will have bytecode
corresponding to direct JVM method calls (similar to Java bytecode)
while the Groovy runtime is often bypassed altogether.
But even for static Groovy, hard-links to the Groovy jars remain.
All Groovy classes still implement the <code>GroovyObject</code> interface (and so have methods like <code>getMetaClass</code> and <code>invokeMethod</code>)
and there are some other places which call into the Groovy runtime.</p>
</div>
<div class="paragraph">
<p>The <code>@POJO</code> marker interface is used to indicate that the generated class is more like a plain old Java object
than an enhanced Groovy object. The annotation is currently ignored unless combined with <code>@CompileStatic</code>.
For such a class, the compiler won&#8217;t generate methods typically needed by Groovy, e.g. <code>getMetaClass()</code>.
This feature is typically used for generating classes which need to be used with Java or Java frameworks
in situations where Java might become confused by Groovy&#8217;s "plumbing" methods.</p>
</div>
<div class="paragraph">
<p>The feature is incubating. Currently, the presence of the annotation should be
treated like a <em>hint</em> to the compiler to produce bytecode not relying on the
Groovy runtime if it can, but <em>not a guarantee</em>.</p>
</div>
<div class="paragraph">
<p>Users of <code>@CompileStatic</code> will know that certain dynamic
features aren&#8217;t possible when they switch to static Groovy.
They might expect that using <code>@CompileStatic</code> and <code>@POJO</code>
might result in even more restrictions.
This isn&#8217;t strictly the case.
Adding <code>@POJO</code> does result in more Java-like code in certain places,
but numerous Groovy features still work.</p>
</div>
<div class="paragraph">
<p>Consider the following example. First a Groovy <code>Point</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@CompileStatic
@POJO
@Canonical(includeNames = true)
class Point {
    Integer x, y
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And now a Groovy <code>PointList</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@CompileStatic
@POJO
class PointList {
    @Delegate
    List&lt;Point&gt; points
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can compile those classes using <code>groovyc</code> in the normal way
and should see the expected <em>Point.class</em> and <em>PointList.class</em> files produced.</p>
</div>
<div class="paragraph">
<p>We can then compile the following Java code.
We do not need the Groovy jars available for <code>javac</code> or <code>java</code>,
we only need the class files produced from the previous step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Predicate&lt;Point&gt; xNeqY = p -&gt; p.getX() != p.getY();  // <b class="conum">(1)</b>

Point p13 = new Point(1, 3);
List&lt;Point&gt; pts = List.of(p13, new Point(2, 2), new Point(3, 1));
PointList list = new PointList();
list.setPoints(pts);

System.out.println(list.size());
System.out.println(list.contains(p13));

list.forEach(System.out::println);

long count = list.stream().filter(xNeqY).collect(counting());  // <b class="conum">(2)</b>
System.out.println(count);</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Check whether x not equal to y</p>
</li>
<li>
<p>Count points where x neq y</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that while our <code>PointList</code> class has numerous list methods available
(<code>size</code>, <code>contains</code>, <code>forEach</code>, <code>stream</code>, etc.) courtesy of Groovy&#8217;s <code>@Delegate</code> transform,
these are baked into the class file, and the bytecode produced doesn&#8217;t call
into any Groovy libraries or rely on any runtime code.</p>
</div>
<div class="paragraph">
<p>When run, the following output is produced:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3
true
Point(x:1, y:3)
Point(x:2, y:2)
Point(x:3, y:1)
2</pre>
</div>
</div>
<div class="paragraph">
<p>In essence, this opens up the possibility to use Groovy
as a kind of pre-processor similar to <a href="https://projectlombok.org/">Lombok</a> but backed by the Groovy language.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>WARNING:</em>
Not all parts of the compiler and not all AST transforms yet know about <code>POJO</code>.
Your mileage may vary as to whether using this approach will or won&#8217;t require
the Groovy jars to be on the classpath. While we anticipate some improvements over time
allowing more Groovy constructs to work with <code>@POJO</code>, we currently make no guarantees that
all constructs will eventually be supported. Hence the incubating status.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Groovy4.0-new-records">Record-like classes (incubating)</h3>
<div class="paragraph">
<p>Java 14 introduced <em>records</em> as a <em>preview</em> feature.
As per this <a href="https://www.infoq.com/articles/java-14-feature-spotlight/">records spotlight article</a>,
records "model <em>plain data</em> aggregates with less ceremony".
Groovy has features like the <code>@Immutable</code> transformation which already support
modeling data aggregates with less ceremony, and while these features overlap to some degree
with the design of records, they are not a direct equivalent.
Records are a slight re-mixing of the features of <code>@Immutable</code> with a few variations added to the mix.</p>
</div>
<div class="paragraph">
<p>Luckily for us, Groovy&#8217;s <code>@Immutable</code> is itself a meta-annotation (also known as annotation collector)
which combines more fine-grained features. It is relatively simple to provide a record-like re-mix
of those features and that is what Groovy 4 provides with its <code>@RecordType</code> transform.
It combines the following transforms/marker annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@RecordBase
@ToString(cache = true, includeNames = true)
@EqualsAndHashCode(cache = true, useCanEqual = false)
@ImmutableOptions
@PropertyOptions(propertyHandler = ImmutablePropertyHandler)
@TupleConstructor(defaults = false)
@MapConstructor
@KnownImmutable
@POJO</code></pre>
</div>
</div>
<div class="paragraph">
<p>You define and use a record-like class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@groovy.transform.RecordType
class Cyclist {
    String firstName
    String lastName
}

def richie = new Cyclist('Richie', 'Porte')</code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces a class with the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is implicitly final</p>
</li>
<li>
<p>it has a private final field <code>firstName</code> with an accessor method <code>firstName()</code>; ditto for <code>lastName</code></p>
</li>
<li>
<p>it has a default <code>Cyclist(String, String)</code> constructor</p>
</li>
<li>
<p>it has a default <code>serialVersionUID</code> of 0L</p>
</li>
<li>
<p>it has implicit <code>toString()</code>, <code>equals()</code> and <code>hashCode()</code> methods</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In future releases, we may provide some syntactic sugar to allow the above definition to be written like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">record Cyclist(String firstName, String lastName) { }    // possible future syntax</code></pre>
</div>
</div>
<div class="paragraph">
<p>This syntax is <strong>not</strong> currently supported.
We are seeking feedback on the implementation details in the meantime
and are keen to understand where our users might use records or record-like structures.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>WARNING:</em>
The implementation of records is not final, hence the incubating status.
We are still weighing up numerous options.
We can make our record-like classes much more flexible than the Java variant,
so long as we follow the rules such classes are expected to follow.
However, at some point, if we provide too many differences, it may cause
future issues as Java records evolve.
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="Groovy4.0-new-contracts">Groovy Contracts (incubating)</h3>
<div class="paragraph">
<p>This optional module supports design-by-contract style of programming.
More specifically, it provides contract annotations that support the
specification of class-invariants, pre-conditions, and post-conditions
on Groovy classes and interfaces.
Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">import groovy.contracts.*

@Invariant({ speed() &gt;= 0 })
class Rocket {
    int speed = 0
    boolean started = true

    @Requires({ isStarted() })
    @Ensures({ old.speed &lt; speed })
    def accelerate(inc) { speed += inc }

    def isStarted() { started }

    def speed() { speed }
}

def r = new Rocket()
r.accelerate(5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This causes checking logic, corresponding to the contract declarations, to be injected
as required in the classes methods and constructors.
The checking logic will ensure that any pre-condition is satisfied
before a method executes, that any post-condition holds after any method executes
and that any class invariant is true before and after a method is called.</p>
</div>
<div class="paragraph">
<p>This module replaces the previously external <code>gcontracts</code> project which is now archived.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ginq_a_k_a_groovy_integrated_query_incubating">GINQ, a.k.a. Groovy-Integrated Query (incubating)</h3>
<div class="paragraph">
<p>GINQ supports querying collections in a SQL-like style.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">from p in persons
leftjoin c in cities on p.city.name == c.name
where c.name == 'Shanghai'
select p.name, c.name as cityName

from p in persons
groupby p.gender
having p.gender == 'Male'
select p.gender, max(p.age)

from p in persons
orderby p.age in desc, p.name
select p.name

from n in numbers
where n &gt; 0 &amp;&amp; n &lt;= 3
select n * 2

from n1 in nums1
innerjoin n2 in nums2 on n1 == n2
select n1 + 1, n2</code></pre>
</div>
</div>
<div class="paragraph">
<p>More examples could be found at
<a href="https://github.com/apache/groovy/blob/master/subprojects/groovy-ginq/src/spec/test/org/apache/groovy/ginq/GinqTest.groovy">GINQ examples</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_toml_support_incubating">TOML Support (incubating)</h3>
<div class="paragraph">
<p>Support is now available for handling <a href="https://toml.io/en/">TOML</a>-based files including building:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def builder = new TomlBuilder()
builder.records {
    car {
        name 'HSV Maloo'
        make 'Holden'
        year 2006
        country 'Australia'
        homepage new URL('http://example.org')
        record {
            type 'speed'
            description 'production pickup truck with speed of 271kph'
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and parsing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def ts = new TomlSlurper()
def toml = ts.parseText(builder.toString())

assert 'HSV Maloo' == toml.records.car.name
assert 'Holden' == toml.records.car.make
assert 2006 == toml.records.car.year
assert 'Australia' == toml.records.car.country
assert 'http://example.org' == toml.records.car.homepage
assert 'speed' == toml.records.car.record.type
assert 'production pickup truck with speed of 271kph' == toml.records.car.record.description</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-other">Other improvements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gstring_performance_improvements">GString performance improvements</h3>
<div class="paragraph">
<p>GString internals were revamped to improve performance.
When safe to do so, GString toString values are now automatically cached.
While infrequently used, GStrings do permit their internal data structures to
be viewed (and even changed!). In such circumstances, caching is disabled.
If you wish to view and not change the internal data structures, you can
call a <code>freeze()</code> method in <code>GStringImpl</code> to disallow changing of the internal
data structures which allows caching to remain active.
<a href="https://issues.apache.org/jira/browse/GROOVY-9637">GROOVY-9637</a></p>
</div>
<div class="paragraph">
<p>As an example, the following script takes about 10s to run with Groovy 3 and about 0.1s with Groovy 4:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def now = java.time.LocalDateTime.now()
def gs = "integer: ${1}, double: ${1.2d}, string: ${'x'}, class: ${Map.class}, boolean: ${true}, date: ${now}"
long b = System.currentTimeMillis()
for (int i = 0; i &lt; 10000000; i++) {
    gs.toString()
}
long e = System.currentTimeMillis()
println "${e - b}ms"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enhanced_ranges">Enhanced Ranges</h3>
<div class="paragraph">
<p>Groovy has always supported inclusive, e.g. <code>3..5</code>, and exclusive (or open on the right), e.g. <code>4..&lt;10</code>, ranges.
From Groovy 4, ranges can be closed, open on the left, e.g. <code>3&lt;..5</code>, right or both sides, e.g. <code>0&lt;..&lt;3</code>.
The range will exclude the left or right-most values for such ranges.
<a href="https://issues.apache.org/jira/browse/GROOVY-9649">GROOVY-9649</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_support_for_decimal_fraction_literals_without_a_leading_zero">Support for decimal fraction literals without a leading zero</h3>
<div class="paragraph">
<p>Groovy has previously required a leading zero for fractional values, but leaving off the leading zero is now also supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def half = .5
def otherHalf = 0.5  // leading zero remains supported
double third = .333d
float quarter = .25f
def fractions = [.1, .2, .3]

// can be used for ranges too (with a rare edge case you might want to avoid)
def range1 = -1.5..&lt;.5    // okay here
def range2 = -1.5.. .5    // space is okay but harder for humans <b class="conum">(1)</b>
def range3 = -1.5..0.5    // leading zero edge case <b class="conum">(1)</b>
assert range3 == [-1.5, -.5, .5]</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A fractional value without a leading zero can&#8217;t appear immediately after the range <code>..</code> operator.
The three dots in a row would be confusing and similar to the varargs notation.
You should leave a space (might still be confusing for humans readers) or
retain the leading zero (recommended).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_jsr308_improvements_incubating">JSR308 improvements (incubating)</h3>
<div class="paragraph">
<p>Groovy has been improving JSR-308 support over recent versions.
In Groovy 4.0, additional support has been added. In particular,
type annotations are now supported on generic types. This is useful
for users of tools like the <a href="https://jqwik.net/">Jqwik</a> property-based testing library
and technologies like the <a href="https://beanvalidation.org/2.0/">Bean Validation 2</a> framework.
Here is an example of a Jqwik test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@Grab('net.jqwik:jqwik:1.5.1')
import net.jqwik.api.*
import net.jqwik.api.constraints.*

class PropertyBasedTests {
    @Property
    def uniqueInList(@ForAll @Size(5) @UniqueElements List&lt;@IntRange(min = 0, max = 10) Integer&gt; aList) {
        assert aList.size() == aList.toSet().size()
        assert aList.every{ anInt -&gt; anInt &gt;= 0 &amp;&amp; anInt &lt;= 10 }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In earlier versions of Groovy, the <code>@Forall</code>, <code>@Size</code>, and <code>@UniqueElements</code> annotations
were handled, but the <code>@IntRange</code> annotation on the <code>List</code> generic type didn&#8217;t appear in the
generated bytecode and now does.</p>
</div>
<div class="paragraph">
<p>Here is a Bean Validation 2 framework example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">@Grab('org.hibernate.validator:hibernate-validator:7.0.1.Final')
@Grab('org.hibernate.validator:hibernate-validator-cdi:7.0.1.Final')
@Grab('org.glassfish:jakarta.el:4.0.0')
import jakarta.validation.constraints.*
import jakarta.validation.*
import groovy.transform.*

@Canonical
class Car {
    @NotNull @Size(min = 2, max = 14) String make
    @Min(1L) int seats
    List&lt;@NotBlank String&gt; owners
}

def validator = Validation.buildDefaultValidatorFactory().validator

def violations = validator.validate(new Car(make: 'T', seats: 1))
assert violations*.message == ['size must be between 2 and 14']

violations = validator.validate(new Car(make: 'Tesla', owners: ['']))
assert violations*.message.toSet() == ['must be greater than or equal to 1', 'must not be blank'] as Set

violations = validator.validate(new Car(make: 'Tesla', owners: ['Elon'], seats: 2))
assert !violations</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, all annotations except the <code>@NonBlank</code> annotation on the <code>List</code> generic type
were previously supported, and now <code>@NonBlank</code> will appear in the bytecode too.</p>
</div>
<div class="paragraph">
<p>This feature is marked as incubating. The generated bytecode is not expected to change
but some minor details of the AST representation of the annotations during compilation
may change slightly before the feature leaves incubating status.</p>
</div>
<div class="paragraph">
<p>In addition, type annotations that appear in code,
e.g. local variable types, cast expression types, catch block exception types,
are still work in progress.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-ongoing">On-going work</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enhanced_switch_under_investigation">Enhanced switch (under investigation)</h3>
<div class="paragraph">
<p>Groovy has always had a very powerful switch statement.
The statement could be made more powerful, e.g. support destructuring,
and could be supported in contexts where expressions are expected.</p>
</div>
<div class="paragraph">
<p>As inspiration, Java has made, or is investigating future enhancements
including switch expressions and other related enhancements:
<a href="https://openjdk.java.net/jeps/354">JEP 354: Switch Expressions (Second Preview)</a>
<a href="https://openjdk.java.net/jeps/361">JEP 361: Switch Expressions</a>
<a href="https://openjdk.java.net/jeps/405">JEP 405: Record Patterns &amp; Array Patterns (Preview)</a>
<a href="https://openjdk.java.net/jeps/406">JEP 406: Pattern Matching for switch (Preview)</a>
We should investigate these proposals both in terms of enhancing the existing Groovy switch
but also in terms of deciding which syntax from Java we might like to support in the future.</p>
</div>
<div class="paragraph">
<p>Other languages like Python are also improving their switch statements:
<a href="https://www.python.org/dev/peps/pep-0622/">PEP 622&#8201;&#8212;&#8201;Structural Pattern Matching</a>.
We should investigate whether any features of their design make sense for Groovy&#8217;s dynamic nature.</p>
</div>
<div class="paragraph">
<p>As an example of destructuring, instead of the following existing code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def make3D(pt) {
    switch(pt) {
        case Point3D:
            return pt
        case Point2D:
            return new Point3D(pt.x, pt.y, 0)
        case List:
            def (x, y, z) = pt
            if (x == 0 &amp;&amp; y == 0 &amp;&amp; z == 0)
                throw new IllegalArgumentException("Origin not allowed")
            return new Point3D(x, y, z)
            ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You could use something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">def make3D(pt) {
    switch(pt) {
        case Point3D:
            return pt
        case Point2D(x, y):
            return new Point3D(x, y, 0)
        case [0, 0, 0]:
            throw new IllegalArgumentException("Origin not allowed")
        case [x, y, z]:
            return new Point3D(x, y, z)
            ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An example of guarded patterns being considered for Java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">static void testTriangle(Shape s) {
    switch (s) {
        case null -&gt;
            System.out.println("Null!");
        case Triangle t &amp;&amp; (t.calculateArea() &gt; 100) -&gt;
            System.out.println("Large triangle");
        case Triangle t -&gt;
            System.out.println("Small triangle");
        default -&gt;
            System.out.println("Non-triangle");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another destructuring example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">int eval(Expr n) {
     return switch(n) {
         case IntExpr(int i) -&gt; i;
         case NegExpr(Expr n) -&gt; -eval(n);
         case AddExpr(Expr left, Expr right) -&gt; eval(left) + eval(right);
         case MulExpr(Expr left, Expr right) -&gt; eval(left) * eval(right);
         default -&gt; throw new IllegalStateException();
     };
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should consider the currently proposed nested record pattern when exploring our
destructuring options, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">static void printColorOfUpperLeftPoint(Rectangle r) {
    if (r instanceof Rectangle(ColoredPoint(Point p, Color c), ColoredPoint lr)) {
        System.out.println(c);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_java_inspired_enhancements">Other Java-inspired enhancements</h3>
<div class="ulist">
<ul>
<li>
<p>Module definitions written in Groovy (i.e. module-info.groovy)
<a href="https://issues.apache.org/jira/browse/GROOVY-9273">GROOVY-9273</a></p>
</li>
<li>
<p>Use of "_" (underscore) for unused parameters (see "Treatment of underscores" in <a href="https://openjdk.java.net/jeps/302">JEP 302: Lambda Leftovers</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-breaking">Other breaking changes</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Numerous classes previously "leaked" ASM constants which are essentially an internal implementation detail by virtue of
implementing an <code>Opcodes</code> interface. This will not normally affect the majority of
Groovy scripts but might impact code which manipulates AST nodes such as AST transforms.
Before compiling with Groovy 4, some of these may need one or more appropriate static import statements added.
AST transforms which extend <code>AbstractASTTransformation</code> are one example of potentially affected classes.
(<a href="https://issues.apache.org/jira/browse/GROOVY-9736">GROOVY-9736</a>).</p>
</li>
<li>
<p><code>ASTTest</code> previously had <code>RUNTIME</code> retention but now has <code>SOURCE</code> retention.
We know of no users making use of the old retention but are aware of various
issues keeping the old value.
<a href="https://issues.apache.org/jira/browse/GROOVY-9702">GROOVY-9702</a></p>
</li>
<li>
<p>There were some inconsistencies with JavaBean property naming conventions
for various edge cases, e.g. for a field with a name being a single uppercase <code>X</code> and having a <code>getX</code> accessor,
then the field was given priority over the accessor.
<a href="https://issues.apache.org/jira/browse/GROOVY-9618">GROOVY-9618</a></p>
</li>
<li>
<p>Numerous mostly internal data structure classes, e.g. AbstractConcurrentMapBase, AbstractConcurrentMap, ManagedConcurrentMap
were deprecated and their usage replaced with better alternatives.
This should be mostly invisible but some changes might impact users using
internal Groovy classes directly.
<a href="https://issues.apache.org/jira/browse/GROOVY-9631">GROOVY-9631</a></p>
</li>
<li>
<p>We bumped our Picocli version. This resulted in minor formatting changes
of some CLI help messages. We recommend not relying on the exact format of such messages.
<a href="https://issues.apache.org/jira/browse/GROOVY-9627">GROOVY-9627</a></p>
</li>
<li>
<p>We are currently attempting to improve how Groovy code accesses private fields
in certain scenarios where such access is expected but problematic, e.g. within closure definitions where
subclasses or inner classes are involved
(<a href="https://issues.apache.org/jira/browse/GROOVY-5438">GROOVY-5438</a>).
You may notice breakages in Groovy 4 code in such scenarios until this issue is progressed.
As a workaround in the meantime, you may be able to use local variable outside a closure
to reference the relevant fields and then reference those local variables in the closure.</p>
</li>
<li>
<p>Earlier Groovy versions unintentionally stored the constants -0.0f and -0.0d to be the same
as 0.0f and 0.0d respectively. This only applied to explicit constants, i.e. it didn&#8217;t apply
to calculations which resulted in positive or negative zero. This also meant that certain
comparisons of positive and negative zero returned true in cases where they should have
been different, and calling <code>unique</code> might have resulted in a set containing just positive zero
instead of both positive and negative zero (the correct answer as per IEEE-745).
Depending on whether you are using primitive or wrapper floating point variants,
you may or may not be affected.
Consider using <code>equalsIgnoreZeroSign</code> and the boolean <code>ignoreZeroSign</code>
constructor variant to <code>NumberAwareComparator</code> if you are affected and desire the old behavior.
These modifications have also been back-ported to Groovy 3, so consider using them in
Groovy 3 code instead of relying on the old behavior so that your code can work
correctly across versions. The fix itself hasn&#8217;t been back-ported to avoid breaking
existing code relying on the unintended flawed behavior.<br>
Bug fix:
<a href="https://issues.apache.org/jira/browse/GROOVY-9797">GROOVY-9797</a><br>
Improved documentation and helper methods:
<a href="https://issues.apache.org/jira/browse/GROOVY-9981">GROOVY-9981</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-requirements">JDK requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Groovy 4.0 requires JDK10+ to build and JDK8 is the minimum version of the JRE that we support.
Groovy has been tested on JDK versions 8 through 16.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Groovy4.0-more-info">More information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can browse all the <a href="../changelogs/changelog-4.0.0-unreleased.html">tickets closed for Groovy 4.0 in JIRA</a>.</p>
</div>
</div>
</div></div></div></div></div><footer id='footer'>
                            <div class='row'>
                                <div class='colset-3-footer'>
                                    <div class='col-1'>
                                        <h1>Groovy</h1><ul>
                                            <li><a href='../learn.html'>Learn</a></li><li><a href='../documentation.html'>Documentation</a></li><li><a href='https://groovy.apache.org/download.html'>Download</a></li><li><a href='../support.html'>Support</a></li><li><a href='https://groovy.apache.org/'>Contribute</a></li><li><a href='../ecosystem.html'>Ecosystem</a></li>
                                        </ul>
                                    </div><div class='col-2'>
                                        <h1>About</h1><ul>
                                            <li><a href='https://github.com/apache/groovy'>Source code</a></li><li><a href='../security.html'>Security</a></li><li><a href='../learn.html#books'>Books</a></li><li><a href='../thanks.html'>Thanks</a></li><li><a href='http://www.apache.org/foundation/sponsorship.html'>Sponsorship</a></li><li><a href='../faq.html'>FAQ</a></li><li><a href='../search.html'>Search</a></li>
                                        </ul>
                                    </div><div class='col-3'>
                                        <h1>Socialize</h1><ul>
                                            <li><a href='../mailing-lists.html'>Discuss on the mailing-list</a></li><li><a href='../groovy-weekly.html'>Groovy newsletter</a></li><li><a href='https://twitter.com/ApacheGroovy'>Groovy on Twitter</a></li><li><a href='../events.html'>Events and conferences</a></li><li><a href='https://github.com/apache/groovy'>Source code on GitHub</a></li><li><a href='../reporting-issues.html'>Report issues in Jira</a></li><li><a href='http://stackoverflow.com/questions/tagged/groovy'>Stack Overflow questions</a></li><li><a href='http://groovycommunity.com/'>Slack Community</a></li>
                                        </ul>
                                    </div><div class='col-right'>
                                        <p>
                                            The Groovy programming language is supported by the <a href='http://www.apache.org'>Apache Software Foundation</a> and the Groovy community
                                        </p><img src='../img/asf_logo.png' title='The Apache Software Foundation' alt='The Apache Software Foundation' class='img-responsive'/>
                                    </div>
                                </div><div class='clearfix'>&copy; 2003-2021 the Apache Groovy project &mdash; Groovy is Open Source, <a href='http://www.apache.org/licenses/LICENSE-2.0.html'>Apache 2 License</a></div>
                            </div>
                        </footer></div>
                </div>
            </div>
        </div>
    </div><script src='../js/vendor/jquery-1.10.2.min.js' defer></script><script src='../js/vendor/classie.js' defer></script><script src='../js/vendor/bootstrap.js' defer></script><script src='../js/vendor/sidebarEffects.js' defer></script><script src='../js/vendor/modernizr-2.6.2.min.js' defer></script><script src='../js/plugins.js' defer></script><script src='https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js'></script><script>document.addEventListener('DOMContentLoaded',prettyPrint)</script><script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-257558-10', 'auto');
          ga('send', 'pageview');
    </script>
</body></html>